# Architecture of the Personalised Meal Planner

## Overview

The Personalised Meal Planner is designed to provide users with customized meal plans based on their preferences. The system consists of a web/mobile application, a backend API, and integrations with external services like a recipe provider and a payment gateway.

## Domain

Health and nutrition


## C4 Model

### **Context Diagram (C4 Level 1)**

```mermaid
C4Context
  title Personalised Meal Planner - System Context

  Person(user, "User", "A person who wants to plan meals based on preferences")
  System(mealPlanner, "Personalised Meal Planner", "Helps users create customized meal plans")
  System_Ext(api, "External Recipe API", "Provides recipe recommendations")
  System_Ext(paymentGateway, "Payment Gateway", "Processes subscription payments")

  Rel(user, mealPlanner, "Uses", "Web/Mobile App")
  Rel(mealPlanner, api, "Fetches meal suggestions from", "REST API")
  Rel(mealPlanner, paymentGateway, "Processes payments via", "Secure API")
```

### **Container Diagram (C4 Level 2)**

```mermaid
C4Container
  title Personalised Meal Planner - Container Diagram

  Person(user, "User", "Plans meals and manages preferences")
  System_Boundary(mealPlanner, "Personalised Meal Planner") {
    Container(webApp, "Web/Mobile App", "Allows users to interact with the planner")
    Container(apiService, "Backend API", "Handles business logic and data processing")
    Container(database, "Database", "Stores user preferences and meal plans")
  }

  System_Ext(recipeAPI, "External Recipe API", "Provides meal suggestions")
  System_Ext(paymentGateway, "Payment Gateway", "Handles payments")

  Rel(user, webApp, "Uses", "HTTPS")
  Rel(webApp, apiService, "Sends requests to", "REST API")
  Rel(apiService, database, "Reads/Writes data to", "SQL/NoSQL")
  Rel(apiService, recipeAPI, "Fetches meal plans from", "External API")
  Rel(apiService, paymentGateway, "Processes payments through", "Secure API")
```

### **Component Diagram (C4 Level 3)**

```mermaid
C4Component
  title Personalised Meal Planner - Component Diagram (Backend API)

  Container_Boundary(apiService, "Backend API") {
    Component(authService, "Auth Service", "Handles user authentication and sessions")
    Component(mealService, "Meal Planning Service", "Generates personalized meal plans")
    Component(paymentService, "Payment Service", "Processes payments securely")
    Component(dataAccess, "Database Access Layer", "Handles database operations")
  }

  System_Ext(recipeAPI, "External Recipe API", "Provides meal data")
  System_Ext(paymentGateway, "Payment Gateway", "Handles transactions")

  Rel(authService, dataAccess, "Stores/Retrieves user data from")
  Rel(mealService, recipeAPI, "Fetches meal recommendations from")
  Rel(paymentService, paymentGateway, "Processes payments through")
```

### **Code-Level Diagram (C4 Level 4)**

```mermaid
C4Container
  title Personalised Meal Planner - Code-Level (Backend API)

  Container_Boundary(apiService, "Backend API") {
    Component(authService, "Auth Service", "Handles user authentication and sessions")  
    Component(userController, "User Controller", "Manages user-related operations")
    Component(mealService, "Meal Planning Service", "Generates personalized meal plans")
    Component(paymentService, "Payment Service", "Processes payments securely")
    Component(dataAccess, "Database Access Layer", "Handles database operations")
    Component(notificationService, "Notification Service", "Sends meal plan notifications")
  }

  System_Ext(recipeAPI, "External Recipe API", "Provides meal data")
  System_Ext(paymentGateway, "Payment Gateway", "Handles transactions")

  Rel(userController, authService, "Authenticates users using")
  Rel(userController, mealService, "Requests meal plans from")
  Rel(userController, paymentService, "Initiates transactions via")
  Rel(mealService, dataAccess, "Reads/Writes meal plans in")
  Rel(paymentService, paymentGateway, "Processes payments through")
  Rel(notificationService, userController, "Sends meal notifications to users")
```

### **UML-Class Diagram Alternative**

```mermaid
classDiagram
  class User {
    +id: String
    +name: String
    +email: String
    +preferences: List<String>
  }
  
  class MealPlan {
    +id: String
    +userId: String
    +meals: List<String>
    +generatePlan()
  }

  class AuthService {
    +login(email, password)
    +register(user)
    +logout(userId)
  }

  class MealService {
    +generateMealPlan(userPreferences)
  }

  class PaymentService {
    +processPayment(userId, amount)
  }

  class Database {
    +saveData(entity)
    +getData(query)
  }

  User --> MealPlan : "Creates"
  User --> AuthService : "Authenticates with"
  User --> PaymentService : "Makes payments"
  MealPlan --> MealService : "Generated by"
  MealService --> Database : "Stores meal plans in"
  PaymentService --> Database : "Stores transactions in"
```




